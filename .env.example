# .env.example - Example configuration for the LEGO Sample Factory application.
#
# Duplicate this file to '.env' at the project root and fill in actual values.
# The '.env' file is used by Docker Compose for local development.
# DO NOT COMMIT YOUR '.env' FILE TO GIT!
#
# This file is derived from config_manifest.md for documentation purposes.

# --- Global Configuration & Security ---
# JWT signing secret (min 32 chars). IMPORTANT: Change for production!
SECURITY_JWT_SECRET="MySecretKeyForJWTTokenGeneration2024AtLeast32Characters"
# Token expiration (ISO 8601 duration, e.g., PT1H for 1 hour)
SECURITY_JWT_EXPIRATION="PT1H"

# --- Docker & Networking ---
# Host port for nginx root proxy. Users access the app via this port.
NGINX_ROOT_PROXY_EXTERNAL_PORT=80
# Frontend nginx container internal port (default for Nginx)
FRONTEND_INTERNAL_PORT=80
# Docker Compose network name
DOCKER_NETWORK_NAME=lego-network

# --- Microservice Ports (Internal Container Ports) ---
# These are the ports the Spring Boot applications listen on INSIDE their containers.
# They are used for inter-service communication (e.g., API Gateway routing).
API_GATEWAY_PORT=8011
USER_SERVICE_PORT=8012
MASTERDATA_SERVICE_PORT=8013
INVENTORY_SERVICE_PORT=8014
ORDER_PROCESSING_SERVICE_PORT=8015
SIMAL_INTEGRATION_SERVICE_PORT=8016

# --- Database Configuration (H2 In-Memory) ---
# JDBC URLs for H2 in-memory databases.
# DB_CLOSE_DELAY=-1 prevents DB from closing immediately when last connection closes.
# DB_CLOSE_ON_EXIT=FALSE keeps DB open even if JVM shuts down unexpectedly (less relevant for in-memory).
H2_DB_USER_PATH="jdbc:h2:mem:lego_factory_auth;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE"
H2_DB_MASTERDATA_PATH="jdbc:h2:mem:masterdata_db;DB_CLOSE_DELAY=-1"
H2_DB_INVENTORY_PATH="jdbc:h2:mem:inventory_db;DB_CLOSE_DELAY=-1"
H2_DB_ORDER_PROCESSING_PATH="jdbc:h2:mem:orders_db;DB_CLOSE_DELAY=-1"
H2_DB_SIMAL_INTEGRATION_PATH="jdbc:h2:mem:simal_db;DB_CLOSE_DELAY=-1"

# --- Spring Boot Common Configuration ---
# Hibernate DDL generation mode. 'create-drop' for fresh DB on each startup/shutdown, 'update' for migrations.
SPRING_JPA_HIBERNATE_DDL_AUTO=create-drop
# Enable SQL logging in Spring Boot. Set to 'false' for less verbose logs.
SPRING_JPA_SHOW_SQL=true
# Enable H2 web console for development debugging. **Disable in production.**
SPRING_H2_CONSOLE_ENABLED=true
# Path for H2 web console.
SPRING_H2_CONSOLE_PATH=/h2-console
# Disable JMX for Spring Boot applications.
SPRING_JMX_ENABLED=false

# --- Logging Configuration ---
# Application-specific logging level (e.g., DEBUG, INFO, WARN, ERROR)
LOGGING_LEVEL_IO_LIFE=DEBUG
# Root logging level for all Spring Boot applications
LOG_LEVEL_ROOT=INFO

# --- Management & Monitoring ---
# Exposed actuator endpoints (comma-separated).
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE="health,info,metrics"
# Show detailed health information.
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=always

# --- Frontend Configuration (Development) ---
# API Gateway URL for the React frontend to make calls.
# This will be proxied by the Nginx root proxy when deployed.
VITE_API_GATEWAY_URL="http://localhost:8011"
# React development server port (e.g., when running 'npm run dev' directly)
FRONTEND_SERVE_PORT=5173

# --- CORS Configuration ---
# CORS allowed origins for API Gateway.
# IMPORTANT: Add your production domain here (e.g., https://your-domain.com)
# For local development, use localhost with various ports
CORS_ALLOWED_ORIGINS="http://localhost,http://localhost:80,http://localhost:1011,http://localhost:5173"

# --- API Gateway Configuration (DEPRECATED - Use CORS_ALLOWED_ORIGINS instead) ---
# CORS allowed origins for API Gateway.
# IMPORTANT: Restrict to specific domains in production.
API_GATEWAY_CORS_ALLOWED_ORIGINS="http://localhost:3000,http://localhost:80,http://localhost,http://localhost:5173,http://localhost:5174"

# --- Internal Docker Service URLs (for API Gateway routing) ---
# These URLs are used by the API Gateway to forward requests to backend services.
# They use the service names and internal ports defined in docker-compose.yml.
API_GATEWAY_USER_SERVICE_URL="http://user-service:8012"
API_GATEWAY_MASTERDATA_SERVICE_URL="http://masterdata-service:8013"
API_GATEWAY_INVENTORY_SERVICE_URL="http://inventory-service:8014"
API_GATEWAY_ORDER_PROCESSING_SERVICE_URL="http://order-processing-service:8015"
API_GATEWAY_SIMAL_INTEGRATION_SERVICE_URL="http://simal-integration-service:8016"

# --- Docker Compose Settings (Non-sensitive, can be kept as-is) ---
# Default restart policy for containers.
DOCKER_RESTART_POLICY=unless-stopped
# Default memory limit for containers (e.g., 512m for 512MB).
DOCKER_MEMORY_LIMIT=512m
# Default CPU limit for containers (e.g., 1.0 for 1 full CPU core).
DOCKER_CPU_LIMIT=1.0
# Container image tag (e.g., 'latest' for local development).
DOCKER_TAG=latest

# --- Container Image Names (for reference in docker-compose.yml) ---
CONTAINER_USER_SERVICE_NAME=user-service
CONTAINER_MASTERDATA_SERVICE_NAME=masterdata-service
CONTAINER_INVENTORY_SERVICE_NAME=inventory-service
CONTAINER_ORDER_PROCESSING_SERVICE_NAME=order-processing-service
CONTAINER_SIMAL_INTEGRATION_SERVICE_NAME=simal-integration-service
CONTAINER_API_GATEWAY_NAME=api-gateway
CONTAINER_FRONTEND_NAME=lego-factory-frontend
CONTAINER_NGINX_PROXY_NAME=nginx-root-proxy
